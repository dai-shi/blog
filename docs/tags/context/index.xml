<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Context on Daishi Kato&#39;s blog</title>
    <link>https://blog.axlight.com/tags/context/</link>
    <description>Recent content in Context on Daishi Kato&#39;s blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 10 Jun 2021 21:00:00 +0900</lastBuildDate>
    <atom:link href="https://blog.axlight.com/tags/context/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Testing Global State Libraries With React 18 Alpha Concurrent Rendering</title>
      <link>https://blog.axlight.com/posts/testing-global-state-libraries-with-react-18-alpha-concurrent-rendering/</link>
      <pubDate>Thu, 10 Jun 2021 21:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/testing-global-state-libraries-with-react-18-alpha-concurrent-rendering/</guid>
      <description>&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;&#xA;&lt;p&gt;The React team announced &lt;a href=&#34;https://reactjs.org/blog/2021/06/08/the-plan-for-react-18.html&#34;&gt;The Plan for React 18&lt;/a&gt; with various features.&#xA;Among them, concurrent rendering is one of my interests&#xA;because I have been developing various global state libraries&#xA;and there are known issues called &amp;ldquo;tearing&amp;rdquo; and &amp;ldquo;branching&amp;rdquo;.&lt;/p&gt;&#xA;&lt;p&gt;Tearing is an undesirable behavior in which&#xA;two components render with different values for same global state.&lt;/p&gt;&#xA;&lt;p&gt;Branching is a desirable behavior in which&#xA;a component renders with a stale value for a state in a transition update.&lt;/p&gt;</description>
    </item>
    <item>
      <title>How to Handle Async Actions for Global State With React Hooks and Context</title>
      <link>https://blog.axlight.com/posts/how-to-handle-async-actions-for-global-state-with-react-hooks-and-context/</link>
      <pubDate>Fri, 20 Dec 2019 23:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/how-to-handle-async-actions-for-global-state-with-react-hooks-and-context/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;I have been developing React Tracked, which is&#xA;a library for global state with React Hooks and Context.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://react-tracked.js.org&#34;&gt;https://react-tracked.js.org&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;This is a small library and focuses on only one thing.&#xA;It optimizes re-renders using state usage tracking.&#xA;More technically, it uses Proxies to detect the usage in render,&#xA;and only triggers re-renders if necessary.&lt;/p&gt;&#xA;&lt;p&gt;Because of that, the usage of React Tracked is very straightforward.&#xA;It is just like the normal useContext. Here&amp;rsquo;s an example.&lt;/p&gt;</description>
    </item>
    <item>
      <title>React Tracked Documentation Website with Docusaurus v2</title>
      <link>https://blog.axlight.com/posts/react-tracked-documentation-website-with-docusaurus-v2/</link>
      <pubDate>Tue, 15 Oct 2019 23:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/react-tracked-documentation-website-with-docusaurus-v2/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;I have been developing a React Hooks library called React Tracked.&#xA;This is the library I put much effort lately as well as&#xA;my other libraries.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/dai-shi/react-tracked&#34;&gt;https://github.com/dai-shi/react-tracked&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;This library solves a performance issue with React Context.&#xA;For those who are interested in the fundamental problem,&#xA;please take a look at &lt;a href=&#34;https://github.com/facebook/react/issues/14110&#34;&gt;the long issue&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;What&amp;rsquo;s notable in this library is that&#xA;it doesn&amp;rsquo;t provide any new fancy features.&#xA;You can simply replace Context.Provider and useContext&#xA;with the custom ones, it just works with performance.&lt;/p&gt;</description>
    </item>
    <item>
      <title>4 options to prevent extra rerenders with React context</title>
      <link>https://blog.axlight.com/posts/4-options-to-prevent-extra-rerenders-with-react-context/</link>
      <pubDate>Wed, 21 Aug 2019 21:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/4-options-to-prevent-extra-rerenders-with-react-context/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;React context and useContext are very handy.&#xA;You would have no problem using it while developing a small app.&#xA;If the size of your app became non-trivial,&#xA;you might experience some performance issues with regard to useContext.&#xA;This is because useContext will trigger rerender&#xA;whenever the context value is changed.&#xA;This happens even if the part of the value is not used in render.&#xA;This is by design. If useContext were to conditionally&#xA;trigger rerenders, the hook would become non-composable.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Effortless render optimization with state usage tracking with React hooks</title>
      <link>https://blog.axlight.com/posts/effortless-render-optimization-with-state-usage-tracking-with-react-hooks/</link>
      <pubDate>Sun, 21 Jul 2019 13:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/effortless-render-optimization-with-state-usage-tracking-with-react-hooks/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;React useContext is very handy to avoid prop drilling.&#xA;It can be used to define global state or shared state&#xA;that multiple components in the tree can access.&lt;/p&gt;&#xA;&lt;p&gt;However, useContext is not specifically designed for&#xA;global state and there&amp;rsquo;s a caveat.&#xA;Any change to context value propagates all useContext&#xA;to re-render components.&lt;/p&gt;&#xA;&lt;p&gt;This post shows some example code about the problem&#xA;and the solution with state usage tracking.&lt;/p&gt;&#xA;&lt;h3 id=&#34;problem&#34;&gt;Problem&lt;/h3&gt;&#xA;&lt;p&gt;Let&amp;rsquo;s assume a person object as a state.&lt;/p&gt;</description>
    </item>
    <item>
      <title>How to use react-tracked: React hooks-oriented Todo List example</title>
      <link>https://blog.axlight.com/posts/how-to-use-react-tracked-react-hooks-oriented-todo-list-example/</link>
      <pubDate>Mon, 08 Jul 2019 01:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/how-to-use-react-tracked-react-hooks-oriented-todo-list-example/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;React hooks have changed the way to compose components.&#xA;This post will show an example which is very hooks-oriented.&lt;/p&gt;&#xA;&lt;p&gt;We use two libraries: react-tracked and immer.&#xA;While immer makes it easy to update state in an immutable way,&#xA;react-tracked makes it easy to read state with tracking for optimization.&#xA;Please check out the repo for more details.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/dai-shi/react-tracked&#34;&gt;https://github.com/dai-shi/react-tracked&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;The example we show is the one from Redux: &lt;a href=&#34;https://redux.js.org/basics/example&#34;&gt;Todo List&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;folder-structure&#34;&gt;Folder structure&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- &lt;span style=&#34;color:#ae81ff&#34;&gt;src/&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;index.tsx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;state.ts&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;hooks/&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;useAddTodo.ts&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;useToggleTodo.ts&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;useVisibilityFilter.ts&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;useVisibleTodos.ts&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#ae81ff&#34;&gt;components/&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;AddTodo.tsx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;App.tsx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;FilterLink.tsx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;Footer.tsx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;Todo.tsx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#ae81ff&#34;&gt;VisibleTodoList.tsx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We have two folders &lt;code&gt;components&lt;/code&gt; and &lt;code&gt;hooks&lt;/code&gt;.&#xA;Components are basically views. Hooks include logic.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Four different approaches to non-Redux global state libraries</title>
      <link>https://blog.axlight.com/posts/four-different-approaches-to-non-redux-global-state-libraries/</link>
      <pubDate>Sat, 06 Jul 2019 16:19:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/four-different-approaches-to-non-redux-global-state-libraries/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;Since React hooks landed,&#xA;there has been many libraries proposed for global state.&#xA;Some of them are simple wrappers around context.&#xA;Whereas, some of them are full featured state management systems.&lt;/p&gt;&#xA;&lt;p&gt;Technically, there are several implementations how to store&#xA;state and notify changes.&#xA;We don&amp;rsquo;t go in detail in this post, but just note two axes.&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;whether context based or external store&lt;/li&gt;&#xA;&lt;li&gt;whether subscriptions based or context propagation&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;In this post, we focus on API design of hooks at the consumer end.&#xA;In my observation,&#xA;there are four approaches to the API design.&#xA;Let&amp;rsquo;s see each approach by example in pseudo code.&#xA;As a simple example, we assume an app that has the followings.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Redux-less context-based useSelector hook that has same performance as React-Redux</title>
      <link>https://blog.axlight.com/posts/benchmark-react-tracked/</link>
      <pubDate>Sun, 16 Jun 2019 23:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/benchmark-react-tracked/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;React-Redux provides &lt;a href=&#34;https://react-redux.js.org/api/hooks&#34;&gt;hooks API&lt;/a&gt;&#xA;with nice abstraction.&#xA;Especially, &lt;code&gt;useSelector&lt;/code&gt; is probaly less misused than &lt;code&gt;mapStateToProps&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/dai-shi/react-tracked&#34;&gt;react-tracked&lt;/a&gt;&#xA;is a library for global state without Redux.&#xA;This library provides almost compatible hooks API to React-Redux.&#xA;It&amp;rsquo;s developed with performance in mind, and it should&#xA;be as performant as React-Redux, even though it utilizes&#xA;only React context. See the GitHub repo for more information.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/dai-shi/react-tracked&#34;&gt;https://github.com/dai-shi/react-tracked&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;This post shows benchmark results to convince that&#xA;it actually is performant in one scenario.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Super performant global state with React context and hooks</title>
      <link>https://blog.axlight.com/posts/super-performant-global-state-with-react-context-and-hooks/</link>
      <pubDate>Sat, 15 Jun 2019 23:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/super-performant-global-state-with-react-context-and-hooks/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;There are many libraries to provide global state in React.&#xA;React itself doesn&amp;rsquo;t provide such a feature,&#xA;probably because separation of concerns is important&#xA;and having global state naively is not idiomatic.&#xA;However, in certain cases, having global state is good&#xA;as long as it&amp;rsquo;s properly implemented.&#xA;It&amp;rsquo;s likely that performance drops down&#xA;compared to using non-global state (incl. multiple contexts).&lt;/p&gt;&#xA;&lt;p&gt;This post introduces a library for global state with performance.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Four patterns for global state with React hooks: Context or Redux</title>
      <link>https://blog.axlight.com/posts/four-patterns-for-global-state-with-react-hooks-context-or-redux/</link>
      <pubDate>Mon, 27 May 2019 00:50:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/four-patterns-for-global-state-with-react-hooks-context-or-redux/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;Global state or shared state is one of the biggest issues&#xA;when you start developing a React app.&#xA;Should we use Redux? Do hooks provide a Redux-like solution?&#xA;I would like to show four patterns toward using Redux.&#xA;This is my personal opinion and mainly for new apps.&lt;/p&gt;&#xA;&lt;h3 id=&#34;pattern-1-prop-passing&#34;&gt;Pattern 1: Prop passing&lt;/h3&gt;&#xA;&lt;p&gt;Some might think it wouldn&amp;rsquo;t scale, but the most basic pattern&#xA;should still be prop passing. If the app is small enough,&#xA;define local state in a parent component and simply pass it&#xA;down to child components. I would tolerate two level passing,&#xA;meaning one intermediate component.&lt;/p&gt;</description>
    </item>
    <item>
      <title>A thought on React Context default value</title>
      <link>https://blog.axlight.com/posts/a-thought-on-react-context-default-value/</link>
      <pubDate>Fri, 11 Jan 2019 12:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/a-thought-on-react-context-default-value/</guid>
      <description>&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;&#xA;&lt;p&gt;It&amp;rsquo;s been about a year since React Context API is out. This is powerful and it&amp;rsquo;s even more powerful with upcoming React Hooks API, namely &lt;code&gt;useContext&lt;/code&gt;. Please check out official documents to learn them in detail.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://reactjs.org/docs/context.html&#34;&gt;https://reactjs.org/docs/context.html&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://reactjs.org/docs/hooks-intro.html&#34;&gt;https://reactjs.org/docs/hooks-intro.html&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;Now, this very short article is just about the default value of a context. When you create a context, you pass a default value in the first argument.&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;The &lt;code&gt;defaultValue&lt;/code&gt; argument is &lt;strong&gt;only&lt;/strong&gt; used when a component does not have a matching Provider above it in the tree. This can be helpful for testing components in isolation without wrapping them. Note: passing &lt;code&gt;undefined&lt;/code&gt; as a Provider value does not cause consuming components to use &lt;code&gt;defaultValue&lt;/code&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>React global state by Context API for TypeScript</title>
      <link>https://blog.axlight.com/posts/react-global-state-by-context-api-for-typescript/</link>
      <pubDate>Thu, 08 Nov 2018 12:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/react-global-state-by-context-api-for-typescript/</guid>
      <description>&lt;p&gt;&lt;em&gt;Note: this post has nothing to do with React Hooks API.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;In &lt;a href=&#34;https://blog.axlight.com/posts/react-global-state-by-context-api/&#34;&gt;my previous post&lt;/a&gt;, I introduced a library called react-context-global-state. After a while, I have better knowlege of TypeScript (yes, I&amp;rsquo;m a beginner!), and come up with fairly good type definitions. I just released a new version.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://www.npmjs.com/package/react-context-global-state&#34;&gt;https://www.npmjs.com/package/react-context-global-state&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;example-code-in-typescript&#34;&gt;Example code in TypeScript&lt;/h3&gt;&#xA;&lt;p&gt;Let me breifly show how the code looks like in TypeScript.&lt;/p&gt;&#xA;&lt;p&gt;In a file named state.ts, we define a global state and export function components. The &lt;code&gt;State&lt;/code&gt; type is also exported.&lt;/p&gt;</description>
    </item>
    <item>
      <title>React global state by Context API</title>
      <link>https://blog.axlight.com/posts/react-global-state-by-context-api/</link>
      <pubDate>Fri, 05 Oct 2018 12:00:00 +0900</pubDate>
      <guid>https://blog.axlight.com/posts/react-global-state-by-context-api/</guid>
      <description>&lt;p&gt;I had been trying to find a way to use React without using class. Redux is one solution to achieve this. Although I love the idea of writing everthing in pure functions, Redux is sometimes not suitable for small apps. React v16.3 introduced new Context API officially. Since then, several ideas were proposed to use it for managing global state. So far, I wasn&amp;rsquo;t able to find something I really liked, hence I made a new one.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
